// /*
//  * Copyright 2021, GFXFundamentals.
//  * All rights reserved.
//  *
//  * Redistribution and use in source and binary forms, with or without
//  * modification, are permitted provided that the following conditions are
//  * met:
//  *
//  *     * Redistributions of source code must retain the above copyright
//  * notice, this list of conditions and the following disclaimer.
//  *     * Redistributions in binary form must reproduce the above
//  * copyright notice, this list of conditions and the following disclaimer
//  * in the documentation and/or other materials provided with the
//  * distribution.
//  *     * Neither the name of GFXFundamentals. nor the names of his
//  * contributors may be used to endorse or promote products derived from
//  * this software without specific prior written permission.
//  *
//  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
//  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
//  * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
//  * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
//  * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
//  * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
//  * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
//  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
//  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
//  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
//  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//  */


// // (function (root, factory) {  // eslint-disable-line
// //   if (typeof define === 'function' && define.amd) {
// //     // AMD. Register as an anonymous module.
// //     define([], function () {
// //       return factory.call(root);
// //     });
// //   } else {
// //     // Browser globals
// //     root.webglLessonsUI = factory.call(root);
// //   }
// // }(this, function () {
// //   'use strict';

// export interface SliderOptions {
//   name: string,
//   min: number,
//   step: number,
//   value: number,
//   max: number,
//   slideFn: () => {},
//   precision: number,
//   uiPrecision: number,
//   uiMult: boolean,
// }

// const gopt = getQueryParams();

// export class UISlider {
//   gopt: any;
//   parent: Element;
//   valueElem: Element;
//   sliderElem: Element;
//   constructor(public selector: string, public options: SliderOptions) {
//     this.options = this.setOptions(this.options);
//     this.parent = this.setup(this.selector);
//     this.createSlider();
//     this.valueElem = this.parent.querySelector(".gman-widget-value")!;
//     this.sliderElem = this.parent.querySelector(".gman-widget-slider")!;
//     this.sliderElem.addEventListener('input', this.handleChange);
//     this.sliderElem.addEventListener('change', this.handleChange);
//   }

//   private setOptions(options: SliderOptions): SliderOptions {
//     const opt: SliderOptions = {
//       name: options.name || this.selector.substring(1),
//       precision: options.precision | 0,
//       min: options.min || 0,
//       step: options.step || 1,
//       value: options.value || 0,
//       max: options.max || 1,
//       slideFn: options.slideFn || null,
//       uiPrecision: options.uiPrecision || options.precision,
//       uiMult: options.uiMult || true,
//     };
//     return opt;
//   }

//   setup(selector: string): Element {
//     var parent = document.querySelector(selector);
//     if (!parent) throw new Error("bad selector");
//     return parent;
//   }

//   private createSlider() {
//     const min = this.options.min/this.options.step;
//     const max = this.options.max/this.options.step;
//     const value = this.options.value/this.options.step;

//     this.parent.innerHTML = `
//       <div class="gman-widget-outer">
//         <div class="gman-widget-label">${name}</div>
//         <div class="gman-widget-value"></div>
//         <input class="gman-widget-slider" type="range" min="${min}" max="${max}" value="${value}" />
//       </div>
//     `;

    
//   }

//   private handleChange(event: any) {
//     var value = parseInt(event.target.value);
//     this.updateValue(value);
//     this.options.slideFn(event, { value: value * this.step });
//   }

//   private updateValue(value: number) {
//     this.valueElem.textContent = (value * step * uiMult).toFixed(uiPrecision);
//   }
// }






// function createSlider(parent: Element, options: SliderOptions) {
//   var precision = options.precision || 0;
//   var min = options.min || 0;
//   var step = options.step || 1;
//   var value = options.value || 0;
//   var max = options.max || 1;
//   var fn = options.slide;
//   var name = gopt["ui-" + options.name] || options.name;
//   var uiPrecision = options.uiPrecision === undefined ? precision : options.uiPrecision;
//   var uiMult = options.uiMult || 1;

//   min /= step;
//   max /= step;
//   value /= step;

//   parent.innerHTML = `
//     <div class="gman-widget-outer">
//       <div class="gman-widget-label">${name}</div>
//       <div class="gman-widget-value"></div>
//       <input class="gman-widget-slider" type="range" min="${min}" max="${max}" value="${value}" />
//     </div>
//   `;

//   var valueElem = parent.querySelector(".gman-widget-value");
//   var sliderElem = parent.querySelector(".gman-widget-slider");

//   function updateValue(value: number) {
//     valueElem.textContent = (value * step * uiMult).toFixed(uiPrecision);
//   }

//   updateValue(value);

//   function handleChange(event) {
//     var value = parseInt(event.target.value);
//     updateValue(value);
//     fn(event, { value: value * step });
//   }

//   sliderElem.addEventListener('input', handleChange);
//   sliderElem.addEventListener('change', handleChange);

//   return {
//     elem: parent,
//     updateValue: (v) => {
//       v /= step;
//       sliderElem.value = v;
//       updateValue(v);
//     },
//   };
// }

// function makeSlider(options) {
//   const div = document.createElement("div");
//   return createSlider(div, options);
// }

// var widgetId = 0;
// function getWidgetId() {
//   return "__widget_" + widgetId++;
// }

// function makeCheckbox(options) {
//   const div = document.createElement("div");
//   div.className = "gman-widget-outer";
//   const label = document.createElement("label");
//   const id = getWidgetId();
//   label.setAttribute('for', id);
//   label.textContent = gopt["ui-" + options.name] || options.name;
//   label.className = "gman-checkbox-label";
//   const input = document.createElement("input");
//   input.type = "checkbox";
//   input.checked = options.value;
//   input.id = id;
//   input.className = "gman-widget-checkbox";
//   div.appendChild(label);
//   div.appendChild(input);
//   input.addEventListener('change', function (e) {
//     options.change(e, {
//       value: e.target.checked,
//     });
//   });

//   return {
//     elem: div,
//     updateValue: function (v) {
//       input.checked = !!v;
//     },
//   };
// }

// function makeOption(options) {
//   const div = document.createElement("div");
//   div.className = "gman-widget-outer";
//   const label = document.createElement("label");
//   const id = getWidgetId();
//   label.setAttribute('for', id);
//   label.textContent = gopt["ui-" + options.name] || options.name;
//   label.className = "gman-widget-label";
//   const selectElem = document.createElement("select");
//   options.options.forEach((name, ndx) => {
//     const opt = document.createElement("option");
//     opt.textContent = gopt["ui-" + name] || name;
//     opt.value = ndx;
//     opt.selected = ndx === options.value;
//     selectElem.appendChild(opt);
//   });
//   selectElem.className = "gman-widget-select";
//   div.appendChild(label);
//   div.appendChild(selectElem);
//   selectElem.addEventListener('change', function (e) {
//     options.change(e, {
//       value: selectElem.selectedIndex,
//     });
//   });

//   return {
//     elem: div,
//     updateValue: function (v) {
//       selectElem.selectedIndex = v;
//     },
//   };
// }

// function noop() {
// }

// function genSlider(object, ui) {
//   const changeFn = ui.change || noop;
//   ui.name = ui.name || ui.key;
//   ui.value = object[ui.key];
//   ui.slide = ui.slide || function (event, uiInfo) {
//     object[ui.key] = uiInfo.value;
//     changeFn();
//   };
//   return makeSlider(ui);
// }

// function genCheckbox(object, ui) {
//   const changeFn = ui.change || noop;
//   ui.value = object[ui.key];
//   ui.name = ui.name || ui.key;
//   ui.change = function (event, uiInfo) {
//     object[ui.key] = uiInfo.value;
//     changeFn();
//   };
//   return makeCheckbox(ui);
// }

// function genOption(object, ui) {
//   const changeFn = ui.change || noop;
//   ui.value = object[ui.key];
//   ui.name = ui.name || ui.key;
//   ui.change = function (event, uiInfo) {
//     object[ui.key] = uiInfo.value;
//     changeFn();
//   };
//   return makeOption(ui);
// }
//     //                                                                                                                                                                                                                                                                                                                                                                                                                 }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                   function makeCheckbox(options) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                       const div = document.createElement("div");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                           div.className = "gman-widget-outer";
//     //                                                                                                                                                                                                                                                                                                                                                                                                                               const label = document.createElement("label");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                   const id = getWidgetId();
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                       label.setAttribute('for', id);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                           label.textContent = gopt["ui-" + options.name] || options.name;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                               label.className = "gman-checkbox-label";
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                   const input = document.createElement("input");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                       input.type = "checkbox";
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                           input.checked = options.value;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                               input.id = id;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                   input.className = "gman-widget-checkbox";
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                       div.appendChild(label);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                           div.appendChild(input);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                               input.addEventListener('change', function(e) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      options.change(e, {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               value: e.target.checked,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              return {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    elem: div,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          updateValue: function(v) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  input.checked = !!v;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        },
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            };
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                function makeOption(options) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const div = document.createElement("div");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        div.className = "gman-widget-outer";
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const label = document.createElement("label");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const id = getWidgetId();
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    label.setAttribute('for', id);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        label.textContent = gopt["ui-" + options.name] || options.name;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            label.className = "gman-widget-label";
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const selectElem = document.createElement("select");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    options.options.forEach((name, ndx) => {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const opt = document.createElement("option");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                opt.textContent = gopt["ui-" + name] || name;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      opt.value = ndx;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            opt.selected = ndx === options.value;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  selectElem.appendChild(opt);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          selectElem.className = "gman-widget-select";
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              div.appendChild(label);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  div.appendChild(selectElem);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      selectElem.addEventListener('change', function(e) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             options.change(e, {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      value: selectElem.selectedIndex,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 });
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     return {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           elem: div,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 updateValue: function(v) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         selectElem.selectedIndex = v;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               },
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   };
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       function noop() {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           function genSlider(object, ui) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               const changeFn = ui.change || noop;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ui.name = ui.name || ui.key;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ui.value = object[ui.key];
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ui.slide = ui.slide || function(event, uiInfo) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 object[ui.key] = uiInfo.value;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       changeFn();
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           };
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               return makeSlider(ui);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   function genCheckbox(object, ui) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       const changeFn = ui.change || noop;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ui.value = object[ui.key];
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ui.name = ui.name || ui.key;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ui.change = function(event, uiInfo) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         object[ui.key] = uiInfo.value;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               changeFn();
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   };
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       return makeCheckbox(ui);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           function genOption(object, ui) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               const changeFn = ui.change || noop;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ui.value = object[ui.key];
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ui.name = ui.name || ui.key;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ui.change = function(event, uiInfo) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 object[ui.key] = uiInfo.value;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       changeFn();
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           };
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               return makeOption(ui);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const uiFuncs = {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       slider: genSlider,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           checkbox: genCheckbox,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               option: genOption,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 };
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   function setupUI(parent, object, uiInfos) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       const widgets = {};
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           uiInfos.forEach(function(ui) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 const widget = uiFuncs[ui.type](object, ui);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       parent.appendChild(widget.elem);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             widgets[ui.key] = widget;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     return widgets;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         function updateUI(widgets, data) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Object.keys(widgets).forEach(key => {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const widget = widgets[key];
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         widget.updateValue(data[key]);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 function getQueryParams() {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     var params = {};
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         if (window.hackedParams) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Object.keys(window.hackedParams).forEach(function(key) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       params[key] = window.hackedParams[key];
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if (window.location.search) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           window.location.search.substring(1).split("&").forEach(function(pair) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   var keyValue = pair.split("=").map(function(kv) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             return decodeURIComponent(kv);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             params[keyValue[0]] = keyValue[1];
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   });
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           return params;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             }
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               return {// 
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   setupU// I: setupUI,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       update// UI: updateUI,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           setupS// lider: setupSlider,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               makeSl// ider: makeSlider,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   makeCh// eckbox: makeCheckbox,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     };
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     }));// 
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     exp// ort class Resize {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       private e from "./shaders/vs.glsl?raw"CanvasElement | OffscreenCanvas, numer[]>;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         re  in vec2 a_position;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            uniform vec2 u_resolution;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            import 
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            uniform vec4 u_color;{ Resize } from "../dinkum/util/resize";r: Res// convert the position from pixels to 0.0 to 1.0
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                vec2 zeroToOne = a_position / u_resolution;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  liderElem = parent.querySelector(".gman-widget-slider");
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          // convert from 0->2 to -1->+1 (clip space)
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              vec2 clipSpace = zeroToTwo - 1.0;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);s.heightSizeMap = 
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const resize = new Resize(gl, 640, 480);nresize.[[this.gl.canvas, [300, 15resizeCanvasToDisplayprivate Size(gl.canvas);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ]]
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       console.log(entries)]);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           this.resizeObserver = new Resiz
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           const resolutionUniformLocation = gl.getUnif
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           constar colorLocation = gl.getUniformLocation(program, "u_color");ormLocation(program, "u_resolution");eObserver(this
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           const vao = gl.createVertexArray();
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           // And we need to make that the current vertex array so that all of our attribute settings will apply to that set of attribute state
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           gl.bindVertexArray(vao);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           gl.enableVertexAttribArray(positionAttributeLocation);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);or (const entry of entries) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               let width;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   let height;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   //     let dpr = window// .devicePco// nst positi// ons = [
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     // 10, 20,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       // 80, 20,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         // 10, 30,
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           // 10,
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            = 1; // it's already in width and height
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                } else if (entry.contentBoxSize) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (entry.contentBoxSize[0]) {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              width = entry.contentBoxSize[0].inlineSize;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      height = entry.contentBoxSize[0].blockSize;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            } else {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // legacy
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            width = entry.contentBoxSize.inlineSize;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    height = entry.contentBoxSize.blockSize;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              } else {
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // legacy
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          width = entry.contentRect.width;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                height = entry.contentRect.height;
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const displayWidth = Math.round(width * dpr);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const displayHeight = Math.round(height * dpr);
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                canvasToDisplaySizeMap.set(entry.target, [displayWiconstpublic  canvasToDisplaySizeMap = new Map([[canvas, 
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  resizeCanvasToDispl
//     //
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // Pass in the canvas resolution so we can convert from
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // pixels to clip space in the shader
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  gl.uniform2f(resolutionUniformLocation, gl.canvas.width, gl.canvas.height);aySize(canva
//     //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  liderElem = parent.querySelector(".gman-widget-slider");
//   slider: genSlider,
//   checkbox: genCheckbox,
//   option: genOption,
// };

// function setupUI(parent, object, uiInfos) {
//   const widgets = {};
//   uiInfos.forEach(function (ui) {
//     const widget = uiFuncs[ui.type](object, ui);
//     parent.appendChild(widget.elem);
//     widgets[ui.key] = widget;
//   });
//   return widgets;
// }

// function updateUI(widgets, data) {
//   Object.keys(widgets).forEach(key => {
//     const widget = widgets[key];
//     widget.updateValue(data[key]);
//   });
// }

// function getQueryParams() {
//   var params = {};
//   if (window.hackedParams) {
//     Object.keys(window.hackedParams).forEach(function (key) {
//       params[key] = window.hackedParams[key];
//     });
//   }
//   if (window.location.search) {
//     window.location.search.substring(1).split("&").forEach(function (pair) {
//       var keyValue = pair.split("=").map(function (kv) {
//         return decodeURIComponent(kv);
//       });
//       params[keyValue[0]] = keyValue[1];
//     });
//   }
//   return params;
// }

//   // return {
//   //   setupUI: setupUI,
//   //   updateUI: updateUI,
//   //   setupSlider: setupSlider,
//   //   makeSlider: makeSlider,
//   //   makeCheckbox: makeCheckbox,
//   // };

// // }));
